/*******************************************
 * Copyright Â© 2018 Galaxy Software Services
 *
 * @gssfed/vital-ui-kit, v1.0.1
 * UI Kit for GSS Vital Family
 *
 * By Neil Lin (https://github.com/Neil-Lin),Patric,Laura Lee (https://github.com/l443018),Eric Yip (https://github.com/ericyip),Vibrissa (https://github.com/Vibrissa),YuRu Lee (https://github.com/YuRu-Lee),CJies Tan (https://github.com/cjies),Evan Wu (https://github.com/evanwu-tw)
 *
 * License: MIT
 *
 ******************************************/
"use strict";if("undefined"==typeof jQuery)throw new Error("Sooge UI's JavaScript requires jQuery");var sg=window.sg={},PREFIX="sg",STATE_PREFIX="sg-state",_PREFIX=".sg",_STATE_PREFIX=".sg-state";sg.options={},sg.initializeInput=function(){return $(document).on("click",function(t){0==$(t.target).closest(_PREFIX+"-dropdown-toggle").length&&($(_PREFIX+"-dropdown-menu").parent().removeClass("open"),$(_PREFIX+"-dropdown-menu").attr("aria-expanded","false"))}),$(document).on("click",_PREFIX+"-interbtn--mainbtn",function(){$("#hero-card").addClass(PREFIX+"-card--mask"),$("#interbtn-area").addClass(STATE_PREFIX+"--selected")}),$(document).on("click",_PREFIX+"-interbtn--subtn",function(){$("#hero-card").removeClass(PREFIX+"-card--mask"),$("#interbtn-area").removeClass(STATE_PREFIX+"--selected")}),$(document).on("click",'[data-toggle="dropdown"]',function(){var t="true"!=$(this).attr("aria-expanded");$(this).parent().toggleClass("open"),$(this).attr("aria-expanded",t)}),$(document).on("click",'[data-toggle="dropdown"] + '+_PREFIX+"-dropdown-menu",function(t){t.stopPropagation()}),$(document).on("click",_PREFIX+"-input-item."+STATE_PREFIX+"--icon-clear",function(){var t=$(this);t.children("input").val(""),t.removeClass(STATE_PREFIX+"--has-input")}),$(document).on("keyup",_PREFIX+"-input",function(){var t=$(this),e=t.closest(_PREFIX+"-input-item");""!==t.val()?e.addClass(STATE_PREFIX+"--has-input"):e.removeClass(STATE_PREFIX+"--has-input")}),this},sg.initializeTable=function(){$("#checkbox-table-all").change(function(){var t=$(this).closest(_PREFIX+"-table").find('input[name="checkbox-table"]:checkbox');$(this).is(":checked")?t.prop("checked","checked"):t.removeAttr("checked")}),$('input[name="checkbox-table"]').change(function(){$('input[name="checkbox-table"]:checked').length==$('input[name="checkbox-table"]').length?$("#checkbox-table-all").prop("checked","checked"):$("#checkbox-table-all").removeAttr("checked"),$('input[name="checkbox-table"]:checked')?$(this).parents("tr").removeClass(PREFIX+"-selected"):$(this).parents("tr").addClass(PREFIX+"-selected")});var e=$("table");return e.find("tbody").on("change","input",function(){var t=$(this).closest("td");0===t[0].cellIndex&&(t.closest("tr").toggleClass(PREFIX+"-selected",this.checked),e.trigger("updateCell",[t[0]]))}),e.find("thead input").on("change",function(){var t=this.checked;e.find("tbody tr").each(function(){$(this).find("td:eq(0) input").prop("checked",t).trigger("change")})}),this},sg.initializeTab=function(){$(document).on("click",_PREFIX+"-tab",function(t){$(this).siblings().removeClass(STATE_PREFIX+"--active"),$(this).addClass(STATE_PREFIX+"--active")})},sg.initializeCollapse=function(){return function(s,t){function o(t,e){var i,n=this,o=(e=e||{}).query||"> :even";s.extend(n,{$el:t,options:e,sections:[],isAccordion:e.accordion||!1,db:!!e.persist&&jQueryCollapseStorage(t.get(0).id)}),n.states=n.db?n.db.read():[],n.$el.find(o).each(function(){new jQueryCollapseSection(s(this),n)}),(i=n).$el.on("click","[data-collapse-summary] "+(i.options.clickQuery||""),s.proxy(n.handleClick,i)),n.$el.bind("toggle close open",s.proxy(n.handleEvent,i))}function e(t,e){e.options.clickQuery||t.wrapInner('<a href="#"/>'),s.extend(this,{isOpen:!1,$summary:t.attr("data-collapse-summary",""),$details:t.next(),options:e.options,parent:e}),e.sections.push(this);var i=e.states[this._index()];0===i?this.close(!0):this.$summary.is(".open")||1===i?this.open(!0):this.close(!0)}o.prototype={handleClick:function(t,e){t.preventDefault(),e=e||"toggle";for(var i=this.sections,n=i.length;n--;)if(s.contains(i[n].$summary[0],t.target)){i[n][e]();break}},handleEvent:function(t){if(t.target==this.$el.get(0))return this[t.type]();this.handleClick(t,t.type)},open:function(t){this._change("open",t)},close:function(t){this._change("close",t)},toggle:function(t){this._change("toggle",t)},_change:function(i,t){if(isFinite(t))return this.sections[t][i]();s.each(this.sections,function(t,e){e[i]()})}},e.prototype={toggle:function(){this.isOpen?this.close():this.open()},close:function(t){this._changeState("close",t)},open:function(t){var e=this;e.options.accordion&&!t&&s.each(e.parent.sections,function(t,e){e.close()}),e._changeState("open",t)},_index:function(){return s.inArray(this,this.parent.sections)},_changeState:function(t,e){var i=this;i.isOpen="open"==t,s.isFunction(i.options[t])&&!e?i.options[t].apply(i.$details):i.$details[i.isOpen?"show":"hide"](),i.$summary.toggleClass("open","close"!==t),i.$details.attr("aria-hidden","close"===t),i.$summary.attr("aria-expanded","open"===t),i.$summary.trigger("open"===t?"opened":"closed",i),i.parent.db&&i.parent.db.write(i._index(),i.isOpen)}},s.fn.extend({sgCollapse:function(e,n){return(n?s("body").find("[data-"+PREFIX+"-collapse]"):s(this)).each(function(){var i=n?{}:e,t=s(this).attr("data-"+PREFIX+"-collapse")||"";s.each(t.split(" "),function(t,e){e&&(i[e]=!0)}),new o(s(this),i)})}}),t.jQueryCollapse=o,t.jQueryCollapseSection=e,s(function(){s.fn.sgCollapse(!1,!0)})}(window.jQuery,window),this},sg.initializeTooltip=function(){return 0===$(_PREFIX+"-tooltip").length&&$("body").append('<div class="'+PREFIX+'-tooltip"><div class="'+PREFIX+'-tooltip-inner"></div><div class="'+PREFIX+'-tooltip-arrow"></div></div>'),$("[data-tooltip]:not([data-tooltip-initialized=true])").each(function(t,o){$(o).attr("data-tooltip-initialized",!0),$(o).on("mouseover",function(t){try{var e=$(_PREFIX+"-tooltip");e[0].className=PREFIX+"-tooltip";e.find(_PREFIX+"-tooltip-inner");e.addClass(o.dataset.position),e.find(_PREFIX+"-tooltip-inner").text(o.dataset.tooltip);var i=0,n=0;switch(e.css({top:i,left:n}),o.dataset.position){case"top":i=$(o).offset().top-e[0].offsetHeight,n=$(o).offset().left+o.offsetWidth/2-e[0].offsetWidth/2;break;case"left":i=$(o).offset().top+o.offsetHeight/2-e[0].offsetHeight/2,n=$(o).offset().left-e[0].offsetWidth;break;case"right":i=$(o).offset().top+o.offsetHeight/2-e[0].offsetHeight/2,n=$(o).offset().left+o.offsetWidth;break;case"bottom":i=$(o).offset().top+o.offsetHeight,n=$(o).offset().left+o.offsetWidth/2-e[0].offsetWidth/2}i=i<0?0:i,n=n<0?0:n,e.css({top:i,left:n}),e.addClass("in")}catch(t){}}),$(o).on("mouseleave",function(t){$(_PREFIX+"-tooltip").removeClass("in")})}),this},sg.initializeInput().initializeCollapse().initializeTooltip().initializeTable().initializeTab();