/*******************************************
 * Copyright Â© 2018 Galaxy Software Services
 *
 * vital-ui-kit, v1.0.0
 * UI Kit for GSS Vital Family
 *
 * By Neil Lin (https://github.com/Neil-Lin),Patric,Laura Lee (https://github.com/l443018),Eric Yip (https://github.com/ericyip),Vibrissa (https://github.com/Vibrissa),YuRu Lee (https://github.com/YuRu-Lee),CJies Tan (https://github.com/cjies),Evan Wu (https://github.com/evanwu-tw)
 *
 * License: MIT
 *
 ******************************************/
"use strict";if("undefined"==typeof jQuery)throw new Error("Sooge UI's JavaScript requires jQuery");var sg=window.sg={},PREFIX="sg",STATE_PREFIX="sg-state",_PREFIX=".sg",_STATE_PREFIX=".sg-state";sg.options={},sg.initializeInput=function(){return $(document).on("click",function(t){0==$(t.target).closest(_PREFIX+"-dropdown-toggle").length&&($(_PREFIX+"-dropdown-menu").parent().removeClass("open"),$(_PREFIX+"-dropdown-menu").attr("aria-expanded","false"))}),$(document).on("click",_PREFIX+"-interbtn--mainbtn",function(){$("#hero-card").addClass(PREFIX+"-card--mask"),$("#interbtn-area").addClass(STATE_PREFIX+"--selected")}),$(document).on("click",_PREFIX+"-interbtn--subtn",function(){$("#hero-card").removeClass(PREFIX+"-card--mask"),$("#interbtn-area").removeClass(STATE_PREFIX+"--selected")}),$(document).on("click",'[data-toggle="dropdown"]',function(){var t="true"!=$(this).attr("aria-expanded");$(this).parent().toggleClass("open"),$(this).attr("aria-expanded",t)}),$(document).on("click",'[data-toggle="dropdown"] + '+_PREFIX+"-dropdown-menu",function(t){t.stopPropagation()}),$(document).on("click",_PREFIX+"-input-item."+STATE_PREFIX+"--icon-clear",function(){var t=$(this);t.children("input").val(""),t.removeClass(STATE_PREFIX+"--has-input")}),$(_PREFIX+"-input").on("keyup",function(){var t=$(this),e=t.closest(_PREFIX+"-input-item");""!==t.val()?e.addClass(STATE_PREFIX+"--has-input"):e.removeClass(STATE_PREFIX+"--has-input")}),this},sg.initializeTable=function(){$("#checkbox-table-all").change(function(){var t=$(this).closest(_PREFIX+"-table").find('input[name="checkbox-table"]:checkbox');$(this).is(":checked")?t.prop("checked","checked"):t.removeAttr("checked")}),$('input[name="checkbox-table"]').change(function(){$('input[name="checkbox-table"]:checked').length==$('input[name="checkbox-table"]').length?$("#checkbox-table-all").prop("checked","checked"):$("#checkbox-table-all").removeAttr("checked"),$('input[name="checkbox-table"]:checked')?$(this).parents("tr").removeClass(PREFIX+"-selected"):$(this).parents("tr").addClass(PREFIX+"-selected")});var e=$("table");return e.find("tbody").on("change","input",function(){var t=$(this).closest("td");0===t[0].cellIndex&&(t.closest("tr").toggleClass(PREFIX+"-selected",this.checked),e.trigger("updateCell",[t[0]]))}),e.find("thead input").on("change",function(){var t=this.checked;e.find("tbody tr").each(function(){$(this).find("td:eq(0) input").prop("checked",t).trigger("change")})}),this},sg.initializeTab=function(){document.querySelectorAll(_PREFIX+"-tab").forEach(function(t){t.addEventListener("click",function(t){var e=t.path.filter(function(t){return!!t.className&&t.className.match(/^sg-tab$/)});e[0]&&((e=e[0]).parentElement.querySelectorAll(".sg-tab").forEach(function(t){t.classList.remove(STATE_PREFIX+"--active")}),e.classList.add(STATE_PREFIX+"--active"))})})},sg.initializeCollapse=function(){return function(s,t){function o(t,e){var n,i=this,o=(e=e||{}).query||"> :even";s.extend(i,{$el:t,options:e,sections:[],isAccordion:e.accordion||!1,db:!!e.persist&&jQueryCollapseStorage(t.get(0).id)}),i.states=i.db?i.db.read():[],i.$el.find(o).each(function(){new jQueryCollapseSection(s(this),i)}),(n=i).$el.on("click","[data-collapse-summary] "+(n.options.clickQuery||""),s.proxy(i.handleClick,n)),i.$el.bind("toggle close open",s.proxy(i.handleEvent,n))}function e(t,e){e.options.clickQuery||t.wrapInner('<a href="#"/>'),s.extend(this,{isOpen:!1,$summary:t.attr("data-collapse-summary",""),$details:t.next(),options:e.options,parent:e}),e.sections.push(this);var n=e.states[this._index()];0===n?this.close(!0):this.$summary.is(".open")||1===n?this.open(!0):this.close(!0)}o.prototype={handleClick:function(t,e){t.preventDefault(),e=e||"toggle";for(var n=this.sections,i=n.length;i--;)if(s.contains(n[i].$summary[0],t.target)){n[i][e]();break}},handleEvent:function(t){if(t.target==this.$el.get(0))return this[t.type]();this.handleClick(t,t.type)},open:function(t){this._change("open",t)},close:function(t){this._change("close",t)},toggle:function(t){this._change("toggle",t)},_change:function(n,t){if(isFinite(t))return this.sections[t][n]();s.each(this.sections,function(t,e){e[n]()})}},e.prototype={toggle:function(){this.isOpen?this.close():this.open()},close:function(t){this._changeState("close",t)},open:function(t){var e=this;e.options.accordion&&!t&&s.each(e.parent.sections,function(t,e){e.close()}),e._changeState("open",t)},_index:function(){return s.inArray(this,this.parent.sections)},_changeState:function(t,e){var n=this;n.isOpen="open"==t,s.isFunction(n.options[t])&&!e?n.options[t].apply(n.$details):n.$details[n.isOpen?"show":"hide"](),n.$summary.toggleClass("open","close"!==t),n.$details.attr("aria-hidden","close"===t),n.$summary.attr("aria-expanded","open"===t),n.$summary.trigger("open"===t?"opened":"closed",n),n.parent.db&&n.parent.db.write(n._index(),n.isOpen)}},s.fn.extend({sgCollapse:function(e,i){return(i?s("body").find("[data-"+PREFIX+"-collapse]"):s(this)).each(function(){var n=i?{}:e,t=s(this).attr("data-"+PREFIX+"-collapse")||"";s.each(t.split(" "),function(t,e){e&&(n[e]=!0)}),new o(s(this),n)})}}),t.jQueryCollapse=o,t.jQueryCollapseSection=e,s(function(){s.fn.sgCollapse(!1,!0)})}(window.jQuery,window),this},sg.initializeTooltip=function(){return $("body").append('<div class="'+PREFIX+'-tooltip"><div class="'+PREFIX+'-tooltip-inner"></div><div class="'+PREFIX+'-tooltip-arrow"></div></div>'),$("[data-tooltip]").each(function(t,o){$(o).on("click",function(t){try{var e=$(_PREFIX+"-tooltip");0===e.length&&($("body").append('<div class="'+PREFIX+'-tooltip"><div class="'+PREFIX+'-tooltip-inner"></div><div class="'+PREFIX+'-tooltip-arrow"></div></div>'),e=$(_PREFIX+"-tooltip")),e[0].className=PREFIX+"-tooltip";e.find(_PREFIX+"-tooltip-inner");e.addClass(o.dataset.position),e.find(_PREFIX+"-tooltip-inner").text(o.dataset.tooltip);var n=0,i=0;switch(e.css({top:n,left:i}),o.dataset.position){case"top":n=$(o).offset().top-e[0].offsetHeight,i=$(o).offset().left+o.offsetWidth/2-e[0].offsetWidth/2;break;case"left":n=$(o).offset().top+o.offsetHeight/2-e[0].offsetHeight/2,i=$(o).offset().left-e[0].offsetWidth;break;case"right":n=$(o).offset().top+o.offsetHeight/2-e[0].offsetHeight/2,i=$(o).offset().left+o.offsetWidth;break;case"bottom":n=$(o).offset().top+o.offsetHeight,i=$(o).offset().left+o.offsetWidth/2-e[0].offsetWidth/2}n=n<0?0:n,i=i<0?0:i,e.css({top:n,left:i}),e.addClass("in")}catch(t){}})}),$(document).on("click",function(t){var e=$(t.target).closest("[data-tooltip]"),n=$(t.target).closest(_PREFIX+"-tooltip");0===e.length&&0===n.length&&$(_PREFIX+"-tooltip").removeClass("in")}),$(document).on("scroll",function(t){$(_PREFIX+"-tooltip").removeClass("in")}),this},sg.initializeInput().initializeCollapse().initializeTooltip().initializeTable().initializeTab();